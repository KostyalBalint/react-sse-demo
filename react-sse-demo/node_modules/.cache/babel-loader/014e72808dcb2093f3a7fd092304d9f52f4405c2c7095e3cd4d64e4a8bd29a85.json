{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { ServerEventsContext } from \"./ServerEventsProvider\";\nexport const useServerEvents = () => {\n  _s();\n  //const [subscriberID, setSubscriberID] = useState<number>(0);\n  const [eventData, setEventData] = useState();\n\n  //const formatEvent = `@sse-lib/${eventType}`\n\n  const eventSource = useContext(ServerEventsContext);\n  if (!eventSource) {\n    throw new Error(`To use \"useServerEvents()\" wrap your application in provider:\n        <ServerEventsProvider>\n          <YourApp />\n        </ServerEventsProvider>\n    `);\n  }\n  eventSource.onopen = event => {\n    console.log(\"eventSource.onopen: \", event);\n  };\n  eventSource.onerror = event => {\n    console.log(\"eventSource.onerror: \", event);\n  };\n  eventSource.onmessage = event => {\n    console.log(\"eventSource.onmessage: \", event);\n    const data = JSON.parse(event.data);\n    setEventData(data);\n  };\n  return {\n    data: eventData\n  };\n};\n_s(useServerEvents, \"p+dNOcX85vrbPUNOLWXM7grJ1Ng=\");","map":{"version":3,"names":["useContext","useState","ServerEventsContext","useServerEvents","_s","eventData","setEventData","eventSource","Error","onopen","event","console","log","onerror","onmessage","data","JSON","parse"],"sources":["/Users/kostyalbalint/Documents/fun/react-sse/react-sse-demo/src/serverEvents/useServerEvents.tsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { ServerEventsContext } from \"./ServerEventsProvider\";\n\nexport interface ProcessingResult<T> {\n  data: T | undefined;\n}\n\nexport const useServerEvents = <T extends object>(): ProcessingResult<T> => {\n  //const [subscriberID, setSubscriberID] = useState<number>(0);\n  const [eventData, setEventData] = useState<T>();\n\n  //const formatEvent = `@sse-lib/${eventType}`\n\n  const eventSource = useContext(ServerEventsContext);\n\n  if (!eventSource) {\n    throw new Error(`To use \"useServerEvents()\" wrap your application in provider:\n        <ServerEventsProvider>\n          <YourApp />\n        </ServerEventsProvider>\n    `);\n  }\n\n  eventSource.onopen = (event) => {\n    console.log(\"eventSource.onopen: \", event);\n  };\n\n  eventSource.onerror = (event) => {\n    console.log(\"eventSource.onerror: \", event);\n  };\n\n  eventSource.onmessage = (event) => {\n    console.log(\"eventSource.onmessage: \", event);\n    const data = JSON.parse(event.data);\n    setEventData(data);\n  };\n\n  return {\n    data: eventData,\n  };\n};\n"],"mappings":";AAAA,SAASA,UAAU,EAAaC,QAAQ,QAAQ,OAAO;AACvD,SAASC,mBAAmB,QAAQ,wBAAwB;AAM5D,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAA6C;EAAAC,EAAA;EAC1E;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAI,CAAC;;EAE/C;;EAEA,MAAMM,WAAW,GAAGP,UAAU,CAACE,mBAAmB,CAAC;EAEnD,IAAI,CAACK,WAAW,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAE;AACrB;AACA;AACA;AACA,KAAK,CAAC;EACJ;EAEAD,WAAW,CAACE,MAAM,GAAIC,KAAK,IAAK;IAC9BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,KAAK,CAAC;EAC5C,CAAC;EAEDH,WAAW,CAACM,OAAO,GAAIH,KAAK,IAAK;IAC/BC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEF,KAAK,CAAC;EAC7C,CAAC;EAEDH,WAAW,CAACO,SAAS,GAAIJ,KAAK,IAAK;IACjCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,KAAK,CAAC;IAC7C,MAAMK,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACP,KAAK,CAACK,IAAI,CAAC;IACnCT,YAAY,CAACS,IAAI,CAAC;EACpB,CAAC;EAED,OAAO;IACLA,IAAI,EAAEV;EACR,CAAC;AACH,CAAC;AAACD,EAAA,CAjCWD,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}