{"ast":null,"code":"var _jsxFileName = \"/Users/kostyalbalint/Documents/fun/react-sse/react-sse-demo/src/serverEvents/ServerEventsProvider.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, createContext } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ServerEventsContext = /*#__PURE__*/createContext({});\nexport const ServerEventsProvider = props => {\n  _s();\n  const serverEvents = useMemo(() => new EventSource(props.url, {\n    withCredentials: props.withCredentials\n  }), [props.url, props.withCredentials]);\n  useEffect(() => {\n    return () => {\n      serverEvents.close();\n    };\n  }, [serverEvents]);\n  return /*#__PURE__*/_jsxDEV(ServerEventsContext.Provider, {\n    value: serverEvents,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(ServerEventsProvider, \"Pu8sws1ALw0UA+sLLf7vK3JT4b8=\");\n_c = ServerEventsProvider;\nvar _c;\n$RefreshReg$(_c, \"ServerEventsProvider\");","map":{"version":3,"names":["React","useEffect","useMemo","createContext","jsxDEV","_jsxDEV","ServerEventsContext","ServerEventsProvider","props","_s","serverEvents","EventSource","url","withCredentials","close","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kostyalbalint/Documents/fun/react-sse/react-sse-demo/src/serverEvents/ServerEventsProvider.tsx"],"sourcesContent":["import React, {\n  FC,\n  useEffect,\n  useMemo,\n  createContext,\n  PropsWithChildren,\n} from \"react\";\n\nexport interface ServerEventsContextValue extends EventSource {}\n\nexport const ServerEventsContext = createContext<ServerEventsContextValue>(\n  {} as ServerEventsContextValue,\n);\n\ninterface EventsProviderProps {\n  url: string;\n  withCredentials?: boolean;\n}\n\nexport const ServerEventsProvider = (\n  props: PropsWithChildren<EventsProviderProps>,\n) => {\n  const serverEvents = useMemo(\n    () =>\n      new EventSource(props.url, { withCredentials: props.withCredentials }),\n    [props.url, props.withCredentials],\n  );\n\n  useEffect(() => {\n    return () => {\n      serverEvents.close();\n    };\n  }, [serverEvents]);\n\n  return (\n    <ServerEventsContext.Provider value={serverEvents}>\n      {props.children}\n    </ServerEventsContext.Provider>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAEVC,SAAS,EACTC,OAAO,EACPC,aAAa,QAER,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAIf,OAAO,MAAMC,mBAAmB,gBAAGH,aAAa,CAC9C,CAAC,CACH,CAAC;AAOD,OAAO,MAAMI,oBAAoB,GAC/BC,KAA6C,IAC1C;EAAAC,EAAA;EACH,MAAMC,YAAY,GAAGR,OAAO,CAC1B,MACE,IAAIS,WAAW,CAACH,KAAK,CAACI,GAAG,EAAE;IAAEC,eAAe,EAAEL,KAAK,CAACK;EAAgB,CAAC,CAAC,EACxE,CAACL,KAAK,CAACI,GAAG,EAAEJ,KAAK,CAACK,eAAe,CACnC,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXS,YAAY,CAACI,KAAK,CAAC,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAACJ,YAAY,CAAC,CAAC;EAElB,oBACEL,OAAA,CAACC,mBAAmB,CAACS,QAAQ;IAACC,KAAK,EAAEN,YAAa;IAAAO,QAAA,EAC/CT,KAAK,CAACS;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACa,CAAC;AAEnC,CAAC;AAACZ,EAAA,CApBWF,oBAAoB;AAAAe,EAAA,GAApBf,oBAAoB;AAAA,IAAAe,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}