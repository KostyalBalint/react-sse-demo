{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nexport const useEventStream = props => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState();\n  const eventSource = new EventSource(props.url);\n  eventSource.onopen = () => {\n    setIsOpen(true);\n    setError(null);\n  };\n  eventSource.onerror = () => {\n    setIsOpen(false);\n    setError(\"EventSource failed.\");\n  };\n  eventSource.onmessage = event => {\n    const data = props.parser ? props.parser(event.data) : JSON.parse(event.data);\n    setData(data);\n  };\n  return {\n    isOpen,\n    error,\n    data\n  };\n};\n_s(useEventStream, \"awjMWnfzRmUSdYeRcyJB7TiM790=\");","map":{"version":3,"names":["useState","useEventStream","props","_s","isOpen","setIsOpen","error","setError","data","setData","eventSource","EventSource","url","onopen","onerror","onmessage","event","parser","JSON","parse"],"sources":["/Users/kostyalbalint/Documents/fun/react-sse/react-sse-demo/src/hooks/useEventStream.ts"],"sourcesContent":["import {useState} from \"react\";\n\ntype EventStreamProps<T> = {\n    url: string;\n    parser?: (data: string) => T;\n}\n\ntype EventSource<T> = {\n    isOpen: boolean;\n    error: string | null;\n    data?: T\n}\n\nexport const useEventStream = <T>(props: EventStreamProps<T>): EventSource<T>  => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [data, setData] = useState<T | undefined>();\n\n    const eventSource = new EventSource(props.url);\n    eventSource.onopen = () => {\n        setIsOpen(true);\n        setError(null);\n    }\n    eventSource.onerror = () => {\n        setIsOpen(false);\n        setError(\"EventSource failed.\");\n    }\n\n    eventSource.onmessage = (event) => {\n        const data = props.parser ? props.parser(event.data) : JSON.parse(event.data);\n        setData(data);\n    }\n\n    return {\n        isOpen,\n        error,\n        data,\n    }\n}"],"mappings":";AAAA,SAAQA,QAAQ,QAAO,OAAO;AAa9B,OAAO,MAAMC,cAAc,GAAOC,KAA0B,IAAsB;EAAAC,EAAA;EAC9E,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACM,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAgB,CAAC;EAEjD,MAAMU,WAAW,GAAG,IAAIC,WAAW,CAACT,KAAK,CAACU,GAAG,CAAC;EAC9CF,WAAW,CAACG,MAAM,GAAG,MAAM;IACvBR,SAAS,CAAC,IAAI,CAAC;IACfE,QAAQ,CAAC,IAAI,CAAC;EAClB,CAAC;EACDG,WAAW,CAACI,OAAO,GAAG,MAAM;IACxBT,SAAS,CAAC,KAAK,CAAC;IAChBE,QAAQ,CAAC,qBAAqB,CAAC;EACnC,CAAC;EAEDG,WAAW,CAACK,SAAS,GAAIC,KAAK,IAAK;IAC/B,MAAMR,IAAI,GAAGN,KAAK,CAACe,MAAM,GAAGf,KAAK,CAACe,MAAM,CAACD,KAAK,CAACR,IAAI,CAAC,GAAGU,IAAI,CAACC,KAAK,CAACH,KAAK,CAACR,IAAI,CAAC;IAC7EC,OAAO,CAACD,IAAI,CAAC;EACjB,CAAC;EAED,OAAO;IACHJ,MAAM;IACNE,KAAK;IACLE;EACJ,CAAC;AACL,CAAC;AAAAL,EAAA,CAzBYF,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}